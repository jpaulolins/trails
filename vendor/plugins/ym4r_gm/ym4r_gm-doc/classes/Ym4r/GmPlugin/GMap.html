<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Ym4r::GmPlugin::GMap</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Ym4r::GmPlugin::GMap</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/gm_plugin/map_rb.html">
                lib/gm_plugin/map.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Representing the Google Maps API class GMap2.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000095">add_map_type_init</a>&nbsp;&nbsp;
      <a href="#M000091">center_zoom_init</a>&nbsp;&nbsp;
      <a href="#M000093">center_zoom_on_bounds_init</a>&nbsp;&nbsp;
      <a href="#M000092">center_zoom_on_points_init</a>&nbsp;&nbsp;
      <a href="#M000089">control_init</a>&nbsp;&nbsp;
      <a href="#M000107">create</a>&nbsp;&nbsp;
      <a href="#M000105">declare_global_init</a>&nbsp;&nbsp;
      <a href="#M000098">declare_init</a>&nbsp;&nbsp;
      <a href="#M000086">div</a>&nbsp;&nbsp;
      <a href="#M000103">event_global_init</a>&nbsp;&nbsp;
      <a href="#M000102">event_init</a>&nbsp;&nbsp;
      <a href="#M000085">header</a>&nbsp;&nbsp;
      <a href="#M000084">header</a>&nbsp;&nbsp;
      <a href="#M000087">header_width_height</a>&nbsp;&nbsp;
      <a href="#M000101">icon_global_init</a>&nbsp;&nbsp;
      <a href="#M000100">icon_init</a>&nbsp;&nbsp;
      <a href="#M000090">interface_init</a>&nbsp;&nbsp;
      <a href="#M000096">map_type_init</a>&nbsp;&nbsp;
      <a href="#M000083">new</a>&nbsp;&nbsp;
      <a href="#M000104">overlay_global_init</a>&nbsp;&nbsp;
      <a href="#M000094">overlay_init</a>&nbsp;&nbsp;
      <a href="#M000099">record_global_init</a>&nbsp;&nbsp;
      <a href="#M000088">record_init</a>&nbsp;&nbsp;
      <a href="#M000097">set_map_type_init</a>&nbsp;&nbsp;
      <a href="#M000106">to_html</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="MappingObject.html">MappingObject</a></span>
      </div>
    </div>

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">VML_NAMESPACE</td>
          <td>=</td>
          <td class="context-item-value">&quot;xmlns:v=\&quot;urn:schemas-microsoft-com:vml\&quot;&quot;</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
A constant containing the declaration of the VML namespace, necessary to
display polylines under IE.

</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">container</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The id of the DIV that will contain the map in the HTML page.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000085" class="method-detail">
        <a name="M000085"></a>

        <div class="method-heading">
          <a href="#M000085" class="method-signature">
          <span class="method-name">header</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Outputs the <a href="GMap.html#M000084">header</a> necessary to use the
Google Maps API, by including the JS files of the API, as well as a file
containing YM4R/GM helper functions. By default, it also outputs a style
declaration for VML elements. This default can be overriddent by passing
<tt>:with_vml =&gt; false</tt> as option to the method. You can also pass a
<tt>:host</tt> option in order to select the correct API key for the
location where your app is currently running, in case the current
environment has multiple possible keys. Usually, in this case, you should
pass it <tt>@request.host</tt>. If you have defined only one API key for
the current environment, the <tt>:host</tt> option is ignored. Finally you
can override all the key settings in the configuration by passing a value
to the <tt>:key</tt> key. You can pass a language for the map type buttons
with the <tt>:hl</tt> option (possible values are: Japanese (ja), French
(fr), German (de), Italian (it), Spanish (es), Catalan (ca), Basque (eu)
and Galician (gl): no values means english). Finally, you can pass
<tt>:local_search =&gt; true</tt> to get the <a
href="GMap.html#M000084">header</a> css and js information needed for the
local search control. If you do want local search you must also add
<tt>:local_search =&gt; true</tt> to the @map.control_init method.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000085-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000085-source">
<pre>
    <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 29</span>
29:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">header</span>(<span class="ruby-identifier">options</span> = {})
30:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with_vml</span>] = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:with_vml</span>)
31:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:hl</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">''</span>
32:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:local_search</span>] = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:local_search</span>)
33:         <span class="ruby-identifier">api_key</span> = <span class="ruby-constant">ApiKey</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">options</span>)
34:         <span class="ruby-identifier">a</span> = <span class="ruby-node">&quot;&lt;script src=\&quot;http://maps.google.com/maps?file=api&amp;amp;v=2.x&amp;amp;key=#{api_key}&amp;amp;hl=#{options[:hl]}\&quot; type=\&quot;text/javascript\&quot;&gt;&lt;/script&gt;\n&quot;</span>
35:         <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;script src=\&quot;/javascripts/ym4r-gm.js\&quot; type=\&quot;text/javascript\&quot;&gt;&lt;/script&gt;\n&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:without_js</span>]
36:         <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;style type=\&quot;text/css\&quot;&gt;\n v\:* { behavior:url(#default#VML);}\n&lt;/style&gt;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with_vml</span>]
37:         <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;script src=\&quot;http://www.google.com/uds/api?file=uds.js&amp;amp;v=1.0\&quot; type=\&quot;text/javascript\&quot;&gt;&lt;/script&gt;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:local_search</span>]
38:         <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;script src=\&quot;http://www.google.com/uds/solutions/localsearch/gmlocalsearch.js\&quot; type=\&quot;text/javascript\&quot;&gt;&lt;/script&gt;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:local_search</span>]
39:         <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;style type=\&quot;text/css\&quot;&gt;@import url(\&quot;http://www.google.com/uds/css/gsearch.css\&quot;);@import url(\&quot;http://www.google.com/uds/solutions/localsearch/gmlocalsearch.css\&quot;);}&lt;/style&gt;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:local_search</span>]
40:         <span class="ruby-identifier">a</span>
41:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000083" class="method-detail">
        <a name="M000083"></a>

        <div class="method-heading">
          <a href="#M000083" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(container, variable = &quot;map&quot;)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
By default the map in the HTML page will be globally accessible with the
name <tt>map</tt>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000083-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000083-source">
<pre>
    <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 14</span>
14:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">variable</span> = <span class="ruby-value str">&quot;map&quot;</span>)
15:         <span class="ruby-ivar">@container</span> = <span class="ruby-identifier">container</span>
16:         <span class="ruby-ivar">@variable</span> = <span class="ruby-identifier">variable</span>
17:         <span class="ruby-ivar">@init</span> = []
18:         <span class="ruby-ivar">@init_end</span> = [] <span class="ruby-comment cmt">#for stuff that must be initialized at the end (controls)</span>
19:         <span class="ruby-ivar">@init_begin</span> = [] <span class="ruby-comment cmt">#for stuff that must be initialized at the beginning (center + zoom)</span>
20:         <span class="ruby-ivar">@global_init</span> = []
21:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000095" class="method-detail">
        <a name="M000095"></a>

        <div class="method-heading">
          <a href="#M000095" class="method-signature">
          <span class="method-name">add_map_type_init</span><span class="method-args">(map_type, add = true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets up a <a href="GMap.html#M000083">new</a> map type. If <tt>add</tt> is
false, all the other map types of the map are wiped out. If you want to
access the map type in other methods, you should declare the map type first
(with <tt><a href="GMap.html#M000098">declare_init</a></tt>).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000095-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000095-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 163</span>
163:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_map_type_init</span>(<span class="ruby-identifier">map_type</span>, <span class="ruby-identifier">add</span> = <span class="ruby-keyword kw">true</span>)
164:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">add</span>
165:           <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">get_map_types</span>.<span class="ruby-identifier">set_property</span>(<span class="ruby-identifier">:length</span>,<span class="ruby-value">0</span>)
166:         <span class="ruby-keyword kw">end</span>
167:         <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_map_type</span>(<span class="ruby-identifier">map_type</span>)
168:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000091" class="method-detail">
        <a name="M000091"></a>

        <div class="method-heading">
          <a href="#M000091" class="method-signature">
          <span class="method-name">center_zoom_init</span><span class="method-args">(center, zoom)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes the initial center and zoom of the map. <tt>center</tt> can be
both a <a href="GLatLng.html">GLatLng</a> object or a 2-float array.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000091-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000091-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 125</span>
125:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">center_zoom_init</span>(<span class="ruby-identifier">center</span>, <span class="ruby-identifier">zoom</span>)
126:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">center</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">GLatLng</span>)
127:           <span class="ruby-ivar">@init_begin</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">set_center</span>(<span class="ruby-identifier">center</span>,<span class="ruby-identifier">zoom</span>)
128:         <span class="ruby-keyword kw">else</span>
129:           <span class="ruby-ivar">@init_begin</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">set_center</span>(<span class="ruby-constant">GLatLng</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">center</span>),<span class="ruby-identifier">zoom</span>)
130:         <span class="ruby-keyword kw">end</span>
131:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000093" class="method-detail">
        <a name="M000093"></a>

        <div class="method-heading">
          <a href="#M000093" class="method-signature">
          <span class="method-name">center_zoom_on_bounds_init</span><span class="method-args">(latlngbounds)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Center and zoom based on the bbox corners. Pass a <a
href="GLatLngBounds.html">GLatLngBounds</a> object, an array of 2D
coordinates (sw and ne) or an array of <a href="GLatLng.html">GLatLng</a>
objects (sw and ne).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000093-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000093-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 144</span>
144:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">center_zoom_on_bounds_init</span>(<span class="ruby-identifier">latlngbounds</span>)
145:         <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">latlngbounds</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>))
146:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">latlngbounds</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
147:             <span class="ruby-identifier">latlngbounds</span> = <span class="ruby-constant">GLatLngBounds</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">GLatLng</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">latlngbounds</span>[<span class="ruby-value">0</span>]),<span class="ruby-constant">GLatLng</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">latlngbounds</span>[<span class="ruby-value">1</span>]))
148:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">latlngbounds</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">GLatLng</span>)
149:             <span class="ruby-identifier">latlngbounds</span> = <span class="ruby-constant">GLatLngBounds</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">latlngbounds</span>)
150:           <span class="ruby-keyword kw">end</span>
151:         <span class="ruby-keyword kw">end</span>
152:         <span class="ruby-comment cmt">#else it is already a latlngbounds object</span>
153: 
154:         <span class="ruby-ivar">@init_begin</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">center_and_zoom_on_bounds</span>(<span class="ruby-identifier">latlngbounds</span>)
155:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000092" class="method-detail">
        <a name="M000092"></a>

        <div class="method-heading">
          <a href="#M000092" class="method-signature">
          <span class="method-name">center_zoom_on_points_init</span><span class="method-args">(*points)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Center and zoom based on the coordinates passed as argument (either 2D
arrays or <a href="GLatLng.html">GLatLng</a> objects)
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000092-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000092-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 134</span>
134:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">center_zoom_on_points_init</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">points</span>)
135:         <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">points</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
136:           <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">points</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>))
137:             <span class="ruby-identifier">points</span> = <span class="ruby-identifier">points</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">point</span><span class="ruby-operator">|</span> <span class="ruby-constant">GLatLng</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">point</span>) }
138:           <span class="ruby-keyword kw">end</span>
139:           <span class="ruby-ivar">@init_begin</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">center_and_zoom_on_points</span>(<span class="ruby-identifier">points</span>)
140:         <span class="ruby-keyword kw">end</span>
141:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000089" class="method-detail">
        <a name="M000089"></a>

        <div class="method-heading">
          <a href="#M000089" class="method-signature">
          <span class="method-name">control_init</span><span class="method-args">(controls = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes the controls: you can pass a hash with keys
<tt>:small_map</tt>, <tt>:large_map</tt>, <tt>:small_zoom</tt>,
<tt>:scale</tt>, <tt>:map_type</tt>, <tt>:overview_map</tt> and a boolean
value as the value (usually true, since the control is not displayed by
default) and <tt>:local_search</tt>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000089-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000089-source">
<pre>
    <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 74</span>
74:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">control_init</span>(<span class="ruby-identifier">controls</span> = {})
75:         <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_control</span>(<span class="ruby-constant">GSmallMapControl</span>.<span class="ruby-identifier">new</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:small_map</span>]
76:         <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_control</span>(<span class="ruby-constant">GLargeMapControl</span>.<span class="ruby-identifier">new</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:large_map</span>]
77:         <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_control</span>(<span class="ruby-constant">GSmallZoomControl</span>.<span class="ruby-identifier">new</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:small_zoom</span>]
78:         <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_control</span>(<span class="ruby-constant">GScaleControl</span>.<span class="ruby-identifier">new</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:scale</span>]
79:         <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_control</span>(<span class="ruby-constant">GMapTypeControl</span>.<span class="ruby-identifier">new</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:map_type</span>]
80:         <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_control</span>(<span class="ruby-constant">GHierarchicalMapTypeControl</span>.<span class="ruby-identifier">new</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:hierarchical_map_type</span>]        
81:         <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_control</span>(<span class="ruby-constant">GOverviewMapControl</span>.<span class="ruby-identifier">new</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:overview_map</span>]
82:         <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_control</span>(<span class="ruby-constant">GLocalSearchControl</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:anchor</span>], <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:offset_width</span>], <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:offset_height</span>])) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">controls</span>[<span class="ruby-identifier">:local_search</span>]
83:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000107" class="method-detail">
        <a name="M000107"></a>

        <div class="method-heading">
          <a href="#M000107" class="method-signature">
          <span class="method-name">create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Outputs in JavaScript the creation of a GMap2 object
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000107-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000107-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 276</span>
276:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>
277:         <span class="ruby-node">&quot;new GMap2(document.getElementById(\&quot;#{@container}\&quot;))&quot;</span>
278:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000105" class="method-detail">
        <a name="M000105"></a>

        <div class="method-heading">
          <a href="#M000105" class="method-signature">
          <span class="method-name">declare_global_init</span><span class="method-args">(variable,name, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Globally declare a <a href="MappingObject.html">MappingObject</a> with
variable name &quot;name&quot;. Option <tt>:local_construction</tt> should
be passed if the construction has to be done inside the onload callback
method (for exsample if it depends on the <a href="GMap.html">GMap</a> to
be initialized)
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000105-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000105-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 214</span>
214:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">declare_global_init</span>(<span class="ruby-identifier">variable</span>,<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
215:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:local_construction</span>]
216:           <span class="ruby-ivar">@global_init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;var #{variable.assign_to(name)}&quot;</span>
217:         <span class="ruby-keyword kw">else</span>
218:           <span class="ruby-ivar">@global_init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;var #{name};&quot;</span>
219:           <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">variable</span>.<span class="ruby-identifier">assign_to</span>(<span class="ruby-identifier">name</span>)
220:         <span class="ruby-keyword kw">end</span>
221:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000098" class="method-detail">
        <a name="M000098"></a>

        <div class="method-heading">
          <a href="#M000098" class="method-signature">
          <span class="method-name">declare_init</span><span class="method-args">(variable, name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Locally declare a <a href="MappingObject.html">MappingObject</a> with
variable name &quot;name&quot;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000098-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000098-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 178</span>
178:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">declare_init</span>(<span class="ruby-identifier">variable</span>, <span class="ruby-identifier">name</span>)
179:         <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">variable</span>.<span class="ruby-identifier">declare</span>(<span class="ruby-identifier">name</span>)
180:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000086" class="method-detail">
        <a name="M000086"></a>

        <div class="method-heading">
          <a href="#M000086" class="method-signature">
          <span class="method-name">div</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Outputs the &lt;<a href="GMap.html#M000086">div</a> id=&#8230;&gt;&lt;/<a
href="GMap.html#M000086">div</a>&gt; which has been configured to contain
the map. You can pass <tt>:width</tt> and <tt>:height</tt> as options to
output this in the style attribute of the DIV element (you could also
achieve the same effect by putting the dimension info into a CSS or using
the instance method <a
href="GMap.html#M000087">GMap#header_width_height</a>). You can aslo pass
<tt>:class</tt> to set the classname of the <a
href="GMap.html#M000086">div</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000086-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000086-source">
<pre>
    <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 44</span>
44:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">div</span>(<span class="ruby-identifier">options</span> = {})
45:         <span class="ruby-identifier">attributes</span> = <span class="ruby-node">&quot;id=\&quot;#{@container}\&quot; &quot;</span>
46:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:height</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:width</span>)
47:           <span class="ruby-identifier">width</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:width</span>)
48:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">width</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">width</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^[0-9]+$/</span>
49:             <span class="ruby-identifier">width</span> = <span class="ruby-identifier">width</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;px&quot;</span>
50:           <span class="ruby-keyword kw">end</span>
51:           <span class="ruby-identifier">height</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:height</span>)
52:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">height</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">height</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^[0-9]+$/</span>
53:             <span class="ruby-identifier">height</span> = <span class="ruby-identifier">height</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;px&quot;</span>
54:           <span class="ruby-keyword kw">end</span>
55:           <span class="ruby-identifier">attributes</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;style=\&quot;width:#{width};height:#{height}\&quot; &quot;</span>
56:         <span class="ruby-keyword kw">end</span>
57:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:class</span>)
58:           <span class="ruby-identifier">attributes</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">opt</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{opt}=\&quot;#{options[opt]}\&quot;&quot;</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot; &quot;</span>)
59:         <span class="ruby-keyword kw">end</span>
60:         <span class="ruby-node">&quot;&lt;div #{attributes}&gt;&lt;/div&gt;&quot;</span>
61:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000103" class="method-detail">
        <a name="M000103"></a>

        <div class="method-heading">
          <a href="#M000103" class="method-signature">
          <span class="method-name">event_global_init</span><span class="method-args">(object,event,callback)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Registers an event globally
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000103-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000103-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 203</span>
203:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">event_global_init</span>(<span class="ruby-identifier">object</span>,<span class="ruby-identifier">event</span>,<span class="ruby-identifier">callback</span>)
204:         <span class="ruby-ivar">@global_init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;GEvent.addListener(#{object.to_javascript},\&quot;#{MappingObject.javascriptify_method(event.to_s)}\&quot;,#{callback});&quot;</span>
205:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000102" class="method-detail">
        <a name="M000102"></a>

        <div class="method-heading">
          <a href="#M000102" class="method-signature">
          <span class="method-name">event_init</span><span class="method-args">(object,event,callback)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Registers an event
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000102-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000102-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 198</span>
198:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">event_init</span>(<span class="ruby-identifier">object</span>,<span class="ruby-identifier">event</span>,<span class="ruby-identifier">callback</span>)
199:         <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;GEvent.addListener(#{object.to_javascript},\&quot;#{MappingObject.javascriptify_method(event.to_s)}\&quot;,#{callback});&quot;</span>
200:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000084" class="method-detail">
        <a name="M000084"></a>

        <div class="method-heading">
          <a href="#M000084" class="method-signature">
          <span class="method-name">header</span><span class="method-args">(with_vml = true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deprecated. Use the static version instead.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000084-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000084-source">
<pre>
    <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 24</span>
24:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">header</span>(<span class="ruby-identifier">with_vml</span> = <span class="ruby-keyword kw">true</span>)
25:         <span class="ruby-constant">GMap</span>.<span class="ruby-identifier">header</span>(<span class="ruby-identifier">:with_vml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">with_vml</span>)
26:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000087" class="method-detail">
        <a name="M000087"></a>

        <div class="method-heading">
          <a href="#M000087" class="method-signature">
          <span class="method-name">header_width_height</span><span class="method-args">(width,height)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Outputs a style declaration setting the dimensions of the DIV container of
the map. This info can also be set manually in a CSS.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000087-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000087-source">
<pre>
    <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 64</span>
64:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">header_width_height</span>(<span class="ruby-identifier">width</span>,<span class="ruby-identifier">height</span>)
65:         <span class="ruby-node">&quot;&lt;style type=\&quot;text/css\&quot;&gt;\n##{@container} { height: #{height}px;\n  width: #{width}px;\n}\n&lt;/style&gt;&quot;</span>
66:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000101" class="method-detail">
        <a name="M000101"></a>

        <div class="method-heading">
          <a href="#M000101" class="method-signature">
          <span class="method-name">icon_global_init</span><span class="method-args">(icon , name, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes an icon and makes it globally accessible through the JavaScript
variable of name <tt>variable</tt>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000101-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000101-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 193</span>
193:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">icon_global_init</span>(<span class="ruby-identifier">icon</span> , <span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
194:         <span class="ruby-identifier">declare_global_init</span>(<span class="ruby-identifier">icon</span>,<span class="ruby-identifier">name</span>,<span class="ruby-identifier">options</span>)
195:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000100" class="method-detail">
        <a name="M000100"></a>

        <div class="method-heading">
          <a href="#M000100" class="method-signature">
          <span class="method-name">icon_init</span><span class="method-args">(icon , name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deprecated. Use <a href="GMap.html#M000101">icon_global_init</a> instead.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000100-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000100-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 188</span>
188:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">icon_init</span>(<span class="ruby-identifier">icon</span> , <span class="ruby-identifier">name</span>)
189:         <span class="ruby-identifier">icon_global_init</span>(<span class="ruby-identifier">icon</span> , <span class="ruby-identifier">name</span>)
190:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000090" class="method-detail">
        <a name="M000090"></a>

        <div class="method-heading">
          <a href="#M000090" class="method-signature">
          <span class="method-name">interface_init</span><span class="method-args">(interface = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes the interface configuration: double-click zoom, dragging,
continuous zoom,&#8230; You can pass a hash with keys <tt>:dragging</tt>,
<tt>:info_window</tt>, <tt>:double_click_zoom</tt>,
<tt>:continuous_zoom</tt> and <tt>:scroll_wheel_zoom</tt>. The values
should be true or false. Check the google maps API doc to know what the
default values are.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000090-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000090-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 86</span>
 86:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">interface_init</span>(<span class="ruby-identifier">interface</span> = {})
 87:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:dragging</span>].<span class="ruby-identifier">nil?</span>
 88:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:dragging</span>]
 89:              <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">enableDragging</span>() 
 90:           <span class="ruby-keyword kw">else</span>
 91:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">disableDragging</span>() 
 92:           <span class="ruby-keyword kw">end</span>
 93:         <span class="ruby-keyword kw">end</span>
 94:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:info_window</span>].<span class="ruby-identifier">nil?</span>
 95:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:info_window</span>]
 96:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">enableInfoWindow</span>()
 97:           <span class="ruby-keyword kw">else</span>
 98:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">disableInfoWindow</span>()
 99:           <span class="ruby-keyword kw">end</span>
100:         <span class="ruby-keyword kw">end</span>
101:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:double_click_zoom</span>].<span class="ruby-identifier">nil?</span>
102:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:double_click_zoom</span>]
103:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">enableDoubleClickZoom</span>()
104:           <span class="ruby-keyword kw">else</span>
105:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">disableDoubleClickZoom</span>()
106:           <span class="ruby-keyword kw">end</span>
107:         <span class="ruby-keyword kw">end</span>
108:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:continuous_zoom</span>].<span class="ruby-identifier">nil?</span>
109:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:continuous_zoom</span>]
110:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">enableContinuousZoom</span>()
111:           <span class="ruby-keyword kw">else</span>
112:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">disableContinuousZoom</span>()
113:           <span class="ruby-keyword kw">end</span>
114:         <span class="ruby-keyword kw">end</span>
115:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:scroll_wheel_zoom</span>].<span class="ruby-identifier">nil?</span>
116:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface</span>[<span class="ruby-identifier">:scroll_wheel_zoom</span>]
117:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">enableScrollWheelZoom</span>()
118:           <span class="ruby-keyword kw">else</span>
119:             <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">disableScrollWheelZoom</span>()
120:           <span class="ruby-keyword kw">end</span>
121:         <span class="ruby-keyword kw">end</span>
122:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000096" class="method-detail">
        <a name="M000096"></a>

        <div class="method-heading">
          <span class="method-name">map_type_init</span><span class="method-args">(map_type, add = true)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="GMap.html#M000095">add_map_type_init</a>
</p>
        </div>
      </div>

      <div id="method-M000104" class="method-detail">
        <a name="M000104"></a>

        <div class="method-heading">
          <a href="#M000104" class="method-signature">
          <span class="method-name">overlay_global_init</span><span class="method-args">(overlay,name, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Declares the overlay globally with name <tt>name</tt>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000104-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000104-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 208</span>
208:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">overlay_global_init</span>(<span class="ruby-identifier">overlay</span>,<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
209:         <span class="ruby-identifier">declare_global_init</span>(<span class="ruby-identifier">overlay</span>,<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>)
210:         <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_overlay</span>(<span class="ruby-identifier">overlay</span>)
211:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000094" class="method-detail">
        <a name="M000094"></a>

        <div class="method-heading">
          <a href="#M000094" class="method-signature">
          <span class="method-name">overlay_init</span><span class="method-args">(overlay)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes the map by adding an overlay (marker or polyline).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000094-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000094-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 158</span>
158:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">overlay_init</span>(<span class="ruby-identifier">overlay</span>)
159:         <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">add_overlay</span>(<span class="ruby-identifier">overlay</span>)
160:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000099" class="method-detail">
        <a name="M000099"></a>

        <div class="method-heading">
          <a href="#M000099" class="method-signature">
          <span class="method-name">record_global_init</span><span class="method-args">(code)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Records arbitrary JavaScript code and outputs it during initialization
outside the <tt>load</tt> function (ie globally).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000099-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000099-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 183</span>
183:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">record_global_init</span>(<span class="ruby-identifier">code</span>)
184:         <span class="ruby-ivar">@global_init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">code</span>
185:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000088" class="method-detail">
        <a name="M000088"></a>

        <div class="method-heading">
          <a href="#M000088" class="method-signature">
          <span class="method-name">record_init</span><span class="method-args">(code)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Records arbitrary JavaScript code and outputs it during initialization
inside the <tt>load</tt> function.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000088-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000088-source">
<pre>
    <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 69</span>
69:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">record_init</span>(<span class="ruby-identifier">code</span>)
70:         <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">code</span>
71:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000097" class="method-detail">
        <a name="M000097"></a>

        <div class="method-heading">
          <a href="#M000097" class="method-signature">
          <span class="method-name">set_map_type_init</span><span class="method-args">(map_type)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the map type displayed by default after the map is loaded. It should
be known from the map (ie either the default map types or a user-defined
map type added with <tt><a
href="GMap.html#M000095">add_map_type_init</a></tt>). Use <tt><a
href="GMap.html#M000097">set_map_type_init</a>(GMapType::G_SATELLITE_MAP)</tt>
or <tt><a
href="GMap.html#M000097">set_map_type_init</a>(GMapType::G_HYBRID_MAP)</tt>
to initialize the map with repsecitvely the Satellite view and the hybrid
view.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000097-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000097-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 173</span>
173:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_map_type_init</span>(<span class="ruby-identifier">map_type</span>)
174:         <span class="ruby-ivar">@init</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">set_map_type</span>(<span class="ruby-identifier">map_type</span>)
175:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000106" class="method-detail">
        <a name="M000106"></a>

        <div class="method-heading">
          <a href="#M000106" class="method-signature">
          <span class="method-name">to_html</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Outputs the initialization code for the map. By default, it outputs the
script tags, performs the initialization in response to the onload event of
the window and makes the map globally available. If you pass <tt>true</tt>
to the option key <tt>:full</tt>, the map will be setup in full screen, in
which case it is not necessary (but not harmful) to set a size for the map
<a href="GMap.html#M000086">div</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000106-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000106-source">
<pre>
     <span class="ruby-comment cmt"># File lib/gm_plugin/map.rb, line 224</span>
224:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_html</span>(<span class="ruby-identifier">options</span> = {})
225:         <span class="ruby-identifier">no_load</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:no_load</span>]
226:         <span class="ruby-identifier">no_script_tag</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:no_script_tag</span>]
227:         <span class="ruby-identifier">no_declare</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:no_declare</span>]
228:         <span class="ruby-identifier">no_global</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:no_global</span>]
229:         <span class="ruby-identifier">fullscreen</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:full</span>]
230:         <span class="ruby-identifier">load_pr</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:proto_load</span>] <span class="ruby-comment cmt">#to prevent some problems when the onload event callback from Prototype is used</span>
231:         
232:         <span class="ruby-identifier">html</span> = <span class="ruby-value str">&quot;&quot;</span>
233:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">no_script_tag</span>
234:         <span class="ruby-comment cmt">#put the functions in a separate javascript file to be included in the page</span>
235:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@global_init</span> <span class="ruby-operator">*</span> <span class="ruby-value str">&quot;\n&quot;</span>
236:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;var #{@variable};\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">no_declare</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">no_global</span>
237:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">no_load</span>
238:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">load_pr</span>
239:             <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Event.observe(window,'load',&quot;</span>
240:           <span class="ruby-keyword kw">else</span>
241:             <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;window.onload = addCodeToFunction(window.onload,&quot;</span>
242:           <span class="ruby-keyword kw">end</span>
243:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;function() {\n&quot;</span>
244:         <span class="ruby-keyword kw">end</span>
245: 
246:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;if (GBrowserIsCompatible()) {\n&quot;</span> 
247:         
248:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fullscreen</span>
249:           <span class="ruby-comment cmt">#Adding the initial resizing and setting up the event handler for</span>
250:           <span class="ruby-comment cmt">#future resizes</span>
251:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;setWindowDims(document.getElementById('#{@container}'));\n&quot;</span>
252:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;if (window.attachEvent) { window.attachEvent(\&quot;onresize\&quot;, function() {setWindowDims(document.getElementById('#{@container}'));})} else {window.addEventListener(\&quot;resize\&quot;, function() {setWindowDims(document.getElementById('#{@container}')); } , false);}\n&quot;</span>
253:         <span class="ruby-keyword kw">end</span>
254:       
255:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">no_declare</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">no_global</span> 
256:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{declare(@variable)}\n&quot;</span>
257:         <span class="ruby-keyword kw">else</span>
258:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{assign_to(@variable)}\n&quot;</span>
259:         <span class="ruby-keyword kw">end</span>
260:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@init_begin</span> <span class="ruby-operator">*</span> <span class="ruby-value str">&quot;\n&quot;</span>
261:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@init</span> <span class="ruby-operator">*</span> <span class="ruby-value str">&quot;\n&quot;</span>
262:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@init_end</span> <span class="ruby-operator">*</span> <span class="ruby-value str">&quot;\n&quot;</span>
263:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n}\n&quot;</span>
264:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;});\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">no_load</span>
265:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/script&gt;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">no_script_tag</span>
266:         
267:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fullscreen</span>
268:           <span class="ruby-comment cmt">#setting up the style in case of full screen</span>
269:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&lt;style&gt;html, body {width: 100%; height: 100%} body {margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 0px} ##{@container} {margin:  0px;} &lt;/style&gt;&quot;</span>
270:         <span class="ruby-keyword kw">end</span>
271:         
272:         <span class="ruby-identifier">html</span>
273:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>